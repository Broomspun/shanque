<?php
 load()->func("\143\x6f\x6d\x6d\165\x6e\x69\x63\x61\x74\151\x6f\x6e"); class Alisms { private $api = "\150\x74\x74\x70\72\x2f\x2f\144\x79\163\x6d\x73\x61\x70\x69\x2e\x61\x6c\151\171\165\x6e\x63\163\x2e\x63\x6f\x6d\57\77"; private $accessKeyId = ''; private $signName = ''; private $accessKeySecret = ''; private $dateTimeFormat = "\131\55\155\55\x64\x5c\x54\x48\x3a\x69\x3a\x73\134\132"; protected $format = "\x4a\123\117\116"; public function setFormat($format) { goto L63xn; curZZ: if ($VfELI) { goto vH0Va; } goto JWYCs; L63xn: $VfELI = !in_array($format, array("\x52\x41\x57", "\x58\x4d\114", "\112\x53\x4f\x4e")); goto curZZ; JWYCs: $this->format = $format; goto uHp2z; uHp2z: vH0Va: goto anLqk; anLqk: } public function __construct($accessKeyId, $accessKeySecret, $signName) { goto tP4v6; p9VET: $this->signName = $signName; goto e_vI9; vKBpS: $this->accessKeySecret = $accessKeySecret; goto p9VET; tP4v6: $this->accessKeyId = $accessKeyId; goto vKBpS; e_vI9: } public function send($mobile, $TemplateParam, $outOrderId = '', $TemplateCode) { goto nE8XB; x0Krf: $result = ihttp_get($apiurl); goto ZB93K; TvUzI: $params["\123\151\147\156\141\x74\x75\x72\x65"] = $sign; goto AGFpQ; L1q3A: $sign = $this->computeSignature($params, $this->accessKeySecret); goto TvUzI; ZB93K: return $result; goto hRtUW; nE8XB: $params = $this->params($mobile, $TemplateParam, $outOrderId, $TemplateCode); goto L1q3A; gmVC0: $apiurl = $this->api . $querydata; goto x0Krf; AGFpQ: $querydata = http_build_query($params); goto gmVC0; hRtUW: } private function params($mobile, $TemplateParam, $outOrderId, $TemplateCode) { goto qf0KR; E3_Ti: return $params; goto li2y5; oAB7a: $params = array("\x50\x68\157\x6e\x65\x4e\x75\x6d\x62\145\x72\163" => $mobile, "\x53\x69\x67\156\x4e\x61\155\145" => $this->signName, "\124\x65\x6d\x70\154\141\x74\x65\x43\157\x64\145" => $TemplateCode, "\124\145\155\160\154\x61\164\x65\120\141\162\x61\155" => $TemplateParam, "\x4f\x75\x74\111\144" => $outOrderId, "\x52\145\x67\151\157\156\x49\x64" => "\143\x6e\55\150\141\x6e\147\172\x68\157\165", "\x41\x63\x63\x65\x73\163\113\x65\171\111\x64" => $this->accessKeyId, "\106\157\162\155\141\164" => $this->format, "\123\x69\147\x6e\141\x74\165\162\145\115\145\164\x68\157\x64" => "\x48\x4d\x41\x43\55\123\x48\101\61", "\123\x69\x67\156\141\x74\165\162\x65\x56\145\x72\x73\x69\157\x6e" => "\61\56\60", "\x53\x69\x67\x6e\141\x74\x75\162\145\116\157\x6e\x63\145" => uniqid(), "\124\151\155\x65\163\x74\141\x6d\160" => date($this->dateTimeFormat), "\x41\143\164\x69\x6f\156" => "\x53\145\x6e\144\123\155\163", "\126\145\162\x73\x69\x6f\156" => "\62\x30\61\x37\55\x30\65\55\x32\x35"); goto E3_Ti; qf0KR: date_default_timezone_set("\107\x4d\x54"); goto oAB7a; li2y5: } private function computeSignature($parameters, $accessKeySecret) { goto UUFLd; DWJZ2: $canonicalizedQueryString = ''; goto HLVmQ; UUFLd: ksort($parameters); goto DWJZ2; f3jb_: return $signature; goto XxKk2; bNWLm: foreach ($parameters as $key => $value) { $canonicalizedQueryString .= "\46" . $this->percentEncode($key) . "\75" . $this->percentEncode($value); LF5YN: } goto j75Ez; MLLcD: VP5Pl: goto y8rqB; y8rqB: $stringToSign = "\x47\105\x54" . "\46\x25\62\106\46" . $this->percentencode(substr($canonicalizedQueryString, 1)); goto MDusY; HLVmQ: $cTDx6 = !(!empty($parameters) && is_array($parameters)); goto sjP9x; sjP9x: if ($cTDx6) { goto VP5Pl; } goto bNWLm; j75Ez: CldR1: goto MLLcD; MDusY: $signature = $this->signString($stringToSign, $accessKeySecret . "\x26"); goto f3jb_; XxKk2: } protected function signString($source, $accessSecret) { return base64_encode(hash_hmac("\x73\x68\141\x31", $source, $accessSecret, true)); } protected function percentEncode($str) { goto s3cNm; zIXdi: $result = preg_replace("\57\x5c\x2a\57", "\x25\62\101", $result); goto zA5Aj; THpmG: $result = preg_replace("\x2f\134\53\57", "\x25\x32\60", $result); goto zIXdi; US3Ys: return $result; goto Y52sc; s3cNm: $result = urlencode($str); goto THpmG; zA5Aj: $result = preg_replace("\57\45\x37\105\x2f", "\176", $result); goto US3Ys; Y52sc: } }