<?php
 goto U4pek; BXKbI: load()->classs("\143\x6f\165\160\157\x6e"); goto cnkaX; U4pek: defined("\111\x4e\137\x49\x41") or die("\x41\143\x63\145\x73\x73\x20\104\x65\156\x69\x65\144"); goto BXKbI; cnkaX: class WnCoupon extends coupon { public function BuildCardExt($id, $openid = '') { goto vA5vs; GGR6m: c6lx6: goto XKA9m; CEkC0: return array("\143\x61\x72\144\137\x69\x64" => $card_id, "\143\141\x72\x64\137\145\x78\x74" => $cardExt); goto eF3Um; vA5vs: $card_id = pdo_fetchcolumn("\123\x45\114\x45\x43\x54\x20\143\x61\162\x64\137\151\x64\40\106\122\x4f\x4d\x20" . tablename("\163\164\x6f\162\x65\170\x5f\143\157\165\160\x6f\x6e") . "\x20\x57\x48\x45\122\x45\40\x69\144\40\x3d\40\72\x69\x64", array("\72\x69\x64" => $id)); goto VyziZ; PNNlI: if ($p5okQ) { goto c6lx6; } goto v4v5I; Vvbbl: return error(-1, "\345\x8d\241\xe5\x88\xb8\x69\144\344\270\215\345\x90\x88\346\263\x95"); goto iT5kn; VyziZ: $J_2JN = !empty($card_id); goto ucW8Y; ucW8Y: if ($J_2JN) { goto asps_; } goto Vvbbl; cN_3H: $cardExt = json_encode($cardExt); goto CEkC0; v4v5I: return $signature; goto GGR6m; iT5kn: asps_: goto RzF2p; J5eBO: $sign = array($card_id, $time); goto W0opD; W0opD: $signature = $this->SignatureCard($sign); goto m636J; RzF2p: $time = TIMESTAMP; goto J5eBO; XKA9m: $cardExt = array("\164\151\x6d\x65\163\x74\x61\155\x70" => $time, "\163\151\147\x6e\141\164\165\x72\145" => $signature); goto cN_3H; m636J: $p5okQ = !is_error($signature); goto PNNlI; eF3Um: } }